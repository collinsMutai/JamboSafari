<div class="safari-cards-container" id="safaris">
  <h2 class="safari-title">üõèÔ∏è Safari Packages</h2>

  <div class="cards">
    <div *ngFor="let package of safariPackages" class="card">
      <div class="card-header">
        <strong>{{ package.title }}</strong>
      </div>
      <div class="card-body">
        <div class="card-image">
          <img
            [src]="package.image"
            alt="{{ package.title }} Image"
            class="card-img"
          />
        </div>
        <p><strong>Includes:</strong> {{ package.includes }}</p>
        <ul>
          <li *ngFor="let detail of package.details">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="16"
              height="16"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
              class="icon-check"
            >
              <path stroke="none" d="M0 0h24v24H0z" fill="none" />
              <path d="M7 12l5 5l10 -10" />
              <path d="M2 12l5 5m5 -5l5 -5" />
            </svg>
            {{ detail }}
          </li>
        </ul>
        <div class="button-wrapper">
          <button
            class="view-details-btn"
            (click)="openDetailsModal(package.title)"
          >
            View Details
          </button>

          <button class="book-now-btn" (click)="openModal(package.title)">
            Book Now
          </button>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Modal for Package Details -->
<div *ngIf="selectedPackage" class="modal-overlay" (click)="closeModal()">
  <div class="modal-content" (click)="$event.stopPropagation()">
    <div class="modal-header">
      <h3>{{ selectedPackage.title }} - Safari Package Details</h3>
      <button class="close-btn" (click)="closeModal()">‚úñ</button>
    </div>
    <div class="modal-body">
      <!-- Hardcoded full details text -->
      <p>{{ selectedPackage.fullDetails }}</p>
      <p><strong>‚úÖ What‚Äôs Included?</strong></p>

      <!-- Hardcoded inclusions list -->
      <ul>
        <li>
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="16"
            height="16"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
            class="icon-check"
          >
            <path stroke="none" d="M0 0h24v24H0z" fill="none" />
            <path d="M7 12l5 5l10 -10" />
            <path d="M2 12l5 5m5 -5l5 -5" /></svg
          >Private 4x4 Land Cruiser with pop-up roof
        </li>
        <li>
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="16"
            height="16"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
            class="icon-check"
          >
            <path stroke="none" d="M0 0h24v24H0z" fill="none" />
            <path d="M7 12l5 5l10 -10" />
            <path d="M2 12l5 5m5 -5l5 -5" /></svg
          >All park entry fees and professional English-speaking guides
        </li>
        <li>
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="16"
            height="16"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
            class="icon-check"
          >
            <path stroke="none" d="M0 0h24v24H0z" fill="none" />
            <path d="M7 12l5 5l10 -10" />
            <path d="M2 12l5 5m5 -5l5 -5" /></svg
          >Full-board accommodation (lodges or tents)
        </li>
        <li>
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="16"
            height="16"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
            class="icon-check"
          >
            <path stroke="none" d="M0 0h24v24H0z" fill="none" />
            <path d="M7 12l5 5l10 -10" />
            <path d="M2 12l5 5m5 -5l5 -5" /></svg
          >Airport pickup and drop-off
        </li>
        <li>
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="16"
            height="16"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
            class="icon-check"
          >
            <path stroke="none" d="M0 0h24v24H0z" fill="none" />
            <path d="M7 12l5 5l10 -10" />
            <path d="M2 12l5 5m5 -5l5 -5" /></svg
          >Daily bottled water and meals
        </li>
        <li>
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="16"
            height="16"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
            class="icon-check"
          >
            <path stroke="none" d="M0 0h24v24H0z" fill="none" />
            <path d="M7 12l5 5l10 -10" />
            <path d="M2 12l5 5m5 -5l5 -5" /></svg
          >Cultural and spiritual activities
        </li>
      </ul>
    </div>
  </div>
</div>

<!-- Modal for Booking -->
<div
  *ngIf="selectedPackageDetails"
  class="modal-overlay"
  (click)="closeModal()"
>
  <div class="modal-content" (click)="$event.stopPropagation()">
    <div class="modal-header">
      <h3>{{ selectedPackageDetails }} - Safari Package Booking</h3>
      <button class="close-btn" (click)="closeModal()">‚úñ</button>
    </div>
    <div class="modal-body">
      <form (ngSubmit)="onSubmitBooking()">
        <!-- Name Field -->
        <label for="name">Your Name:</label>
        <input type="text" id="name" [(ngModel)]="name" name="name" required />

        <!-- Email Field -->
        <label for="email">Your Email:</label>
        <input
          type="email"
          id="email"
          [(ngModel)]="email"
          name="email"
          required
        />

        <!-- Phone Field -->
        <label for="phone">Your Phone:</label>
        <input
          type="text"
          id="phone"
          [(ngModel)]="phone"
          name="phone"
          required
        />

        <!-- Number of Adults Field -->
        <label for="adults">Number of Adults:</label>
        <input
          type="number"
          id="adults"
          [(ngModel)]="numAdults"
          name="numAdults"
          min="1"
          required
        />

        <!-- Number of Kids Field -->
        <label for="kids">Number of Kids:</label>
        <input
          type="number"
          id="kids"
          [(ngModel)]="numKids"
          name="numKids"
          min="0"
        />

        <!-- From Date Field -->
        <label for="fromDate">From Date:</label>
        <input
          type="date"
          id="fromDate"
          [(ngModel)]="fromDate"
          name="fromDate"
          required
        />

        <!-- To Date Field -->
        <label for="toDate">To Date:</label>
        <input
          type="date"
          id="toDate"
          [(ngModel)]="toDate"
          name="toDate"
          required
        />

        <!-- reCAPTCHA widget -->
        <div
          class="g-recaptcha"
          [attr.data-sitekey]="'6LeCsKYrAAAAAAjUr_cM1jdd9dG8XhtYSvRmfOeJ'"
        ></div>

        <!-- Submit Button -->
        <button type="submit" class="book-now-btn">Confirm Booking</button>
      </form>
    </div>
  </div>
</div>

<!-- Payment Decision Modal -->
<div *ngIf="showPaymentModal" class="modal-overlay" (click)="closeModal()">
  <div class="modal-content" (click)="$event.stopPropagation()">
    <div class="modal-header">
      <h3>Would you like to pay now?</h3>
      <button class="close-btn" (click)="closeModal()">‚úñ</button>
    </div>
    <div class="modal-body">
      <p>Your booking has been confirmed. You can complete your payment now or later.</p>
      <div style="display: flex; gap: 10px; justify-content: center; margin-top: 20px;">
        <button class="book-now-btn" (click)="goToPayment()">Yes, Pay Now</button>
        <button class="view-details-btn" (click)="closeModal()">No, Maybe Later</button>
      </div>
    </div>
  </div>
</div>
